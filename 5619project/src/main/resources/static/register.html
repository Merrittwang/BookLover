<!DOCTYPE html>
<html lang="en">
<head>
    <div id="head-placeholder"></div>
    <title>Login</title>
</head>

<body>
<nav class="navbar navbar-expand-md navbar-light fixed-top " style=" border-bottom: 1px solid #e0dfdf; background-color: #f5f5f5">
    <div class="container">
        <a class="navbar-brand" href="/login.html">EBOOK LOVER</a>
    </div>
</nav>

<div class="body">
    <form class = 'reg_form' id="reg_form" method="post" action="form-recaptcha">
        <div class="reg_container">
            <h1 align="center"><b>Register</b></h1>
            <label><b>Username</b></label><br>
            <input class="form-control" name="username" placeholder="Enter Username" type="text" id="username" required>
            <label><b>Password</b></label><br>
            <input class="form-control" name="password" placeholder="Enter Password" type="password" id="password" required>
            <label><b>Confirm Password</b></label><br>
            <input class="form-control" name="repeatPassword" placeholder="Enter Again" type="password" id="password2" required>
            <input class="btn btn-dark" type=button" value="Register Now" style="margin-top:10px; width:100%;" id = "btn-reg">
            <input style="margin-top:10px; width:100%;" class="btn btn-dark" type="button" value="Go back to login"  id="btn-register" onclick="window.location.href='/login.html'">
        </div>

    </form>
    <div id="error_message"></div>
</div>

<footer id="footer-placeholder" ></footer>


<!-- Load jQuery and Bootstrap JS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src='https://www.google.com/recaptcha/api.js'></script>


<script>
  $(function(){
    $("#head-placeholder").load("./html/head.html");
    $("#footer-placeholder").load("./html/footer.html");
  });
</script>
<script>
            $("#btn-reg").click(function () {
                $.ajax({
                    url: "/users/reg",
                    type: "POST",
                    data: $("#reg_form").serialize(),

                    dataType: "JSON",
                    success: function (json) { //1.js是弱数据类型,这个地方不用声明json的数据类型
                        //2.如果服务器成功响应就会将返回的数据传给形参,比如{state: 4000,message: "用户名
                        // 已经被占用",data: null}
                        if (json.state == 200) {
                            alert("success")
                        } else {
                            alert(json.message)
                        }
                    },
                    error: function (xhr) {
                        alert("unknown"+xhr.status);
                    }
                });
            });
        </script>

</body>


</html>

